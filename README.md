# ğŸ¬ Online Cinema API

**FastAPI-Ğ´Ğ¾Ğ´Ğ°Ñ‚Ğ¾Ğº Ğ´Ğ»Ñ Ğ¾Ğ½Ğ»Ğ°Ğ¹Ğ½-ĞºÑ–Ğ½Ğ¾Ñ‚ĞµĞ°Ñ‚Ñ€Ñƒ.**  
Ğ”ĞµĞ¿Ğ»Ğ¾Ğ¹ Ğ²Ğ¸ĞºĞ¾Ğ½Ğ°Ğ½Ğ¾ Ğ½Ğ° AWS EC2, Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ¸Ğ¹ Ğ·Ğ° Ğ°Ğ´Ñ€ĞµÑĞ¾Ñ:

ğŸ‘‰ **[http://63.180.135.237/docs](http://63.180.135.237/docs)**

---

## ğŸ”§ ĞÑĞ½Ğ¾Ğ²Ğ½Ñ– Ñ‚ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ñ–Ñ—

| Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ñ–Ñ | ĞŸÑ€Ğ¸Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ½Ñ |
|-------------|--------------|
| **FastAPI** | Ğ‘ĞµĞºĞµĞ½Ğ´ Ñ‚Ğ° OpenAPI-Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ñ–Ñ |
| **SQLite** | Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ¸Ñ… |
| **SQLAlchemy (async)** | ORM |
| **Celery + Redis** | Ğ¤Ğ¾Ğ½Ğ¾Ğ²Ñ– Ğ·Ğ°Ğ´Ğ°Ñ‡Ñ– |
| **Mailhog** | Ğ¢ĞµÑÑ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ Ğ²Ñ–Ğ´Ğ¿Ñ€Ğ°Ğ²ĞºĞ¸ email |
| **Docker & Docker Compose** | ĞšĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¸Ğ·Ğ°Ñ†Ñ–Ñ |
| **Nginx** | Ğ ĞµĞ²ĞµÑ€Ñ-Ğ¿Ñ€Ğ¾ĞºÑÑ– Ğ´Ğ»Ñ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ñƒ Ğ·Ğ·Ğ¾Ğ²Ğ½Ñ– |

---

## âš™ï¸ Environment Variables

Ğ¡Ñ‚Ğ²Ğ¾Ñ€Ğ¸ Ñ„Ğ°Ğ¹Ğ» `.env` Ñƒ ĞºĞ¾Ñ€ĞµĞ½Ñ– Ğ¿Ñ€Ğ¾Ñ”ĞºÑ‚Ñƒ Ğ· Ñ‚Ğ°ĞºĞ¸Ğ¼ Ğ²Ğ¼Ñ–ÑÑ‚Ğ¾Ğ¼:

```bash
DATABASE_URL=sqlite+aiosqlite:///./online_cinema.db
EMAIL_HOST=mailhog
EMAIL_PORT=1025
EMAIL_USE_TLS=False
EMAIL_USER=
EMAIL_PASSWORD=
SECRET_KEY=supersecret
STRIPE_SECRET_KEY=your_stripe_secret_key
STRIPE_WEBHOOK_SECRET=your_stripe_webhook_secret
```
âš ï¸Ğ¦ĞµĞ¹ .env Ğ²Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ¾Ğ²ÑƒÑ”Ñ‚ÑŒÑÑ ÑĞº Ğ´Ğ»Ñ Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ·Ğ°Ğ¿ÑƒÑĞºÑƒ, Ñ‚Ğ°Ğº Ñ– Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ´Ğ°ĞºÑˆĞµĞ½Ñƒ Ğ² Docker.

## ğŸš€ Ğ›Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¸Ğ¹ Ğ·Ğ°Ğ¿ÑƒÑĞº
```bash
# ĞšĞ»Ğ¾Ğ½ÑƒĞ²Ğ°Ğ½Ğ½Ñ Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ñ–Ñ
git clone https://github.com/msubchak/online-cinema.git

cd online-cinema
# Ğ—Ğ°Ğ¿ÑƒÑĞº ÑƒÑÑ–Ñ… ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ñ–Ğ²
docker compose up --build

```
## Swagger-Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ñ–Ñ Ğ±ÑƒĞ´Ğµ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ° Ğ·Ğ° Ğ°Ğ´Ñ€ĞµÑĞ¾Ñ:
```bash
http://localhost:8000/docs
```

## ğŸŒ ĞŸÑ€Ğ¾Ğ´Ğ°ĞºÑˆĞ½ (AWS)

API Ñ€Ğ¾Ğ·Ğ³Ğ¾Ñ€Ğ½ÑƒÑ‚Ğ¾ Ñƒ **Docker-ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ°Ñ…** Ğ· **Nginx-Ğ¿Ñ€Ğ¾ĞºÑÑ–**.

| ĞŸĞ¾Ñ€Ñ‚ | ĞŸÑ€Ğ¸Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ½Ñ |
|------|--------------|
| **80** | HTTP-Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ Ğ´Ğ¾ FastAPI Ñ‡ĞµÑ€ĞµĞ· Nginx |
| **8025** | Mailhog (Ğ¿ĞµÑ€ĞµĞ²Ñ–Ñ€ĞºĞ° email-Ğ¿Ğ¾Ğ²Ñ–Ğ´Ğ¾Ğ¼Ğ»ĞµĞ½ÑŒ) |

ğŸ“ **Swagger UI (Ğ¿ÑƒĞ±Ğ»Ñ–Ñ‡Ğ½Ğ¸Ğ¹ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿)**:  
ğŸ‘‰ [http://63.180.135.237/docs](http://63.180.135.237/docs)

---

## ğŸ§© ĞÑĞ½Ğ¾Ğ²Ğ½Ñ– ĞµĞ½Ğ´Ğ¿Ğ¾Ñ–Ğ½Ñ‚Ğ¸

| Endpoint | ĞĞ¿Ğ¸Ñ |
|-----------|------|
| `/api/v1/accounts/` | Ğ ĞµÑ”ÑÑ‚Ñ€Ğ°Ñ†Ñ–Ñ, Ğ»Ğ¾Ğ³Ñ–Ğ½, ĞºĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡Ñ– |
| `/api/v1/movies/` | Ğ¤Ñ–Ğ»ÑŒĞ¼Ğ¸, Ğ¶Ğ°Ğ½Ñ€Ğ¸, Ğ°ĞºÑ‚Ğ¾Ñ€Ğ¸, Ñ€ĞµĞ¶Ğ¸ÑĞµÑ€Ğ¸ |
| `/api/v1/cart/` | ĞšĞ¾ÑˆĞ¸Ğº |
| `/api/v1/order/` | Ğ—Ğ°Ğ¼Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ |
| `/api/v1/payment/` | ĞĞ¿Ğ»Ğ°Ñ‚Ğ¸ |


## ğŸ“¦ Ğ¡ĞµÑ€Ğ²Ñ–ÑĞ¸ Ğ² Docker

| Ğ¡ĞµÑ€Ğ²Ñ–Ñ | ĞŸÑ€Ğ¸Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ½Ñ |
|---------|--------------|
| **cinema** | FastAPI API |
| **nginx** | HTTP-Ğ¿Ñ€Ğ¾ĞºÑÑ– |
| **redis** | Ğ§ĞµÑ€Ğ³Ğ° |
| **celery** | Ğ¤Ğ¾Ğ½Ğ¾Ğ²Ñ– Ğ·Ğ°Ğ´Ğ°Ñ‡Ñ– |
| **mailhog** | ĞŸĞµÑ€ĞµĞ²Ñ–Ñ€ĞºĞ° Ğ¿Ğ¾ÑˆÑ‚Ğ¸ |

## ğŸ“ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾Ñ”ĞºÑ‚Ñƒ
```
fastapi-online-cinema/
â”œâ”€â”€ .github/   # CI/CD ĞºĞ¾Ğ½Ñ„Ñ–Ğ³ÑƒÑ€Ğ°Ñ†Ñ–Ñ— GitHub Actions
â”‚ â””â”€â”€ workflows/
â”‚ â””â”€â”€ ci.yml
â”œâ”€â”€ alembic/   # ĞœÑ–Ğ³Ñ€Ğ°Ñ†Ñ–Ñ— Ğ±Ğ°Ğ·Ğ¸ Ğ´Ğ°Ğ½Ğ¸Ñ…
â”‚ â”œâ”€â”€ versions/
â”‚ â”œâ”€â”€ env.py
â”‚ â”œâ”€â”€ script.py.mako
â”‚ â””â”€â”€ README
â”œâ”€â”€ app/    # ĞÑĞ½Ğ¾Ğ²Ğ½Ğ° Ğ»Ğ¾Ğ³Ñ–ĞºĞ° Ğ·Ğ°ÑÑ‚Ğ¾ÑÑƒĞ½ĞºÑƒ
â”‚ â”œâ”€â”€ celery_app/ # ĞĞ°Ğ»Ğ°ÑˆÑ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ Ñ‚Ğ° Ğ·Ğ°Ğ´Ğ°Ñ‡Ñ– Celery
â”‚ â”‚ â”œâ”€â”€ celery_app.py
â”‚ â”‚ â””â”€â”€ tasks.py
â”‚ â”œâ”€â”€ core/ # ĞšĞ¾Ğ½Ñ„Ñ–Ğ³ÑƒÑ€Ğ°Ñ†Ñ–Ñ—, Ğ²Ğ°Ğ»Ñ–Ğ´Ğ°Ñ†Ñ–Ñ—, Ğ²Ğ¸Ğ½ÑÑ‚ĞºĞ¸, Ğ±Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ¸Ñ…
â”‚ â”‚ â”œâ”€â”€ config/
â”‚ â”‚ â”œâ”€â”€ exceptions/
â”‚ â”‚ â”œâ”€â”€ notifications/
â”‚ â”‚ â””â”€â”€ validators/
â”‚ â”‚ â””â”€â”€ database.py
â”‚ â”œâ”€â”€ models/ # SQLAlchemy ORM Ğ¼Ğ¾Ğ´ĞµĞ»Ñ–
â”‚ â”‚ â”œâ”€â”€ accounts.py
â”‚ â”‚ â”œâ”€â”€ Base.py
â”‚ â”‚ â”œâ”€â”€ cart.py
â”‚ â”‚ â”œâ”€â”€ movies.py
â”‚ â”‚ â”œâ”€â”€ order.py
â”‚ â”‚ â””â”€â”€ payments.py
â”‚ â”œâ”€â”€ routes/ # ĞœĞ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¸ FastAPI
â”‚ â”‚ â”œâ”€â”€ accounts.py
â”‚ â”‚ â”œâ”€â”€ cart.py
â”‚ â”‚ â”œâ”€â”€ directors.py
â”‚ â”‚ â”œâ”€â”€ genres.py
â”‚ â”‚ â”œâ”€â”€ movies.py
â”‚ â”‚ â”œâ”€â”€ order.py
â”‚ â”‚ â”œâ”€â”€ payments.py
â”‚ â”‚ â””â”€â”€ stars.py
â”‚ â”œâ”€â”€ schemas/ # Pydantic-ÑÑ…ĞµĞ¼Ğ¸
â”‚ â”‚ â”œâ”€â”€ accounts.py
â”‚ â”‚ â”œâ”€â”€ cart.py
â”‚ â”‚ â”œâ”€â”€ directors.py
â”‚ â”‚ â”œâ”€â”€ genres.py
â”‚ â”‚ â”œâ”€â”€ movies.py
â”‚ â”‚ â”œâ”€â”€ order.py
â”‚ â”‚ â”œâ”€â”€ payments.py
â”‚ â”‚ â””â”€â”€ stars.py
â”‚ â”œâ”€â”€ security/ # ĞÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ñ–ĞºĞ°Ñ†Ñ–Ñ Ñ‚Ğ° Ñ‚Ğ¾ĞºĞµĞ½Ğ¸
â”‚ â”‚ â”œâ”€â”€ auth_dependencies.py
â”‚ â”‚ â”œâ”€â”€ interfaces.py
â”‚ â”‚ â”œâ”€â”€ password.py
â”‚ â”‚ â”œâ”€â”€ token_manager.py
â”‚ â”‚ â””â”€â”€ utils.py
â”‚ â”œâ”€â”€ services/
â”‚ â”œâ”€â”€ tests/ # Pytest-Ñ‚ĞµÑÑ‚Ğ¸
â”‚ â”‚ â”œâ”€â”€ conftest.py    
â”‚ â”‚ â”œâ”€â”€ test_accounts.py
â”‚ â”‚ â”œâ”€â”€ test_cart.py
â”‚ â”‚ â”œâ”€â”€ test_directors.py   
â”‚ â”‚ â”œâ”€â”€ test_genres.py 
â”‚ â”‚ â”œâ”€â”€ test_movies.py
â”‚ â”‚ â”œâ”€â”€ test_order.py
â”‚ â”‚ â”œâ”€â”€ test_payments.py
â”‚ â”‚ â””â”€â”€ test_stars.py 
â”‚ â””â”€â”€ main.py # ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¸Ğ¹ Ğ¼Ğ¾Ğ´ÑƒĞ»ÑŒ Ğ·Ğ°ÑÑ‚Ğ¾ÑÑƒĞ½ĞºÑƒ
â”œâ”€â”€ docker-compose.yml # Docker-ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ñ–Ñ Ğ´Ğ»Ñ Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ·Ğ°Ğ¿ÑƒÑĞºÑƒ
â”œâ”€â”€ docker-compose-prod.yml # Docker-ĞºĞ¾Ğ½Ñ„Ñ–Ğ³ Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ´Ğ°ĞºÑˆĞµĞ½Ñƒ
â”œâ”€â”€ Dockerfile # Ğ‘Ñ–Ğ»Ğ´ Ğ¾Ğ±Ñ€Ğ°Ğ·Ñƒ FastAPI
â”œâ”€â”€ nginx.conf # ĞšĞ¾Ğ½Ñ„Ñ–Ğ³ÑƒÑ€Ğ°Ñ†Ñ–Ñ Nginx-Ğ¿Ñ€Ğ¾ĞºÑÑ–
â”œâ”€â”€ alembic.ini # ĞĞ°Ğ»Ğ°ÑˆÑ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ Alembic
â”œâ”€â”€ pyproject.toml # Poetry + Ğ·Ğ°Ğ»ĞµĞ¶Ğ½Ğ¾ÑÑ‚Ñ–
â”œâ”€â”€ poetry.lock # Ğ¤Ñ–ĞºÑĞ°Ñ†Ñ–Ñ Ğ²ĞµÑ€ÑÑ–Ğ¹ Ğ·Ğ°Ğ»ĞµĞ¶Ğ½Ğ¾ÑÑ‚ĞµĞ¹
â”œâ”€â”€ .env-example  #ĞŸÑ€Ğ¸ĞºĞ»Ğ°Ğ´ Ğ·Ğ¼Ñ–Ğ½Ğ½Ğ¸Ñ… ÑĞµÑ€ĞµĞ´Ğ¾Ğ²Ğ¸Ñ‰ (ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½ Ğ´Ğ»Ñ .env)
â””â”€â”€ README.md # Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ñ–Ñ Ğ¿Ñ€Ğ¾Ñ”ĞºÑ‚Ñƒ
```
